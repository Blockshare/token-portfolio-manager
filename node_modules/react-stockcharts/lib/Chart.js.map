{"version":3,"sources":["../../src/lib/Chart.js"],"names":["Chart","props","context","yScale","bind","listener","id","subscribe","unsubscribe","type","moreProps","state","e","onContextMenu","currentCharts","indexOf","chartConfig","filter","each","copy","chartId","origin","x","y","children","propTypes","height","number","width","oneOfType","array","func","string","isRequired","yExtents","yExtentsCalculator","propName","componentName","Error","flipYScale","bool","padding","shape","top","bottom","node","defaultProps","yPan","contextTypes","childContextTypes","object"],"mappings":"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","file":"Chart.js","sourcesContent":["\"use strict\";\nimport React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { scaleLinear } from \"d3-scale\";\n\nimport PureComponent from \"./utils/PureComponent\";\nimport { isNotDefined, noop } from \"./utils\";\n\nclass Chart extends PureComponent {\n\tconstructor(props, context) {\n\t\tsuper(props, context);\n\t\tthis.yScale = this.yScale.bind(this);\n\t\tthis.listener = this.listener.bind(this);\n\t}\n\tcomponentWillMount() {\n\t\tconst { id } = this.props;\n\t\tconst { subscribe } = this.context;\n\t\tsubscribe(\"chart_\" + id,\n\t\t\t{\n\t\t\t\tlistener: this.listener,\n\t\t\t}\n\t\t);\n\t}\n\tcomponentWillUnmount() {\n\t\tconst { id } = this.props;\n\t\tconst { unsubscribe } = this.context;\n\t\tunsubscribe(\"chart_\" + id);\n\t}\n\tlistener(type, moreProps, state, e) {\n\t\tconst { id, onContextMenu } = this.props;\n\n\t\tif (type === \"contextmenu\") {\n\t\t\tconst { currentCharts } = moreProps;\n\t\t\tif (currentCharts.indexOf(id) > -1) {\n\t\t\t\tonContextMenu(moreProps, e);\n\t\t\t}\n\t\t}\n\t}\n\tyScale() {\n\t\tconst chartConfig = this.context.chartConfig.filter((each) => each.id === this.props.id)[0];\n\t\treturn chartConfig.yScale.copy();\n\t}\n\tgetChildContext() {\n\t\tconst { id: chartId } = this.props;\n\t\tconst chartConfig = this.context.chartConfig.filter((each) => each.id === chartId)[0];\n\n\t\treturn {\n\t\t\tchartId,\n\t\t\tchartConfig,\n\t\t};\n\t}\n\trender() {\n\t\tconst { origin } = this.context.chartConfig.filter((each) => each.id === this.props.id)[0];\n\t\tconst [x, y] = origin;\n\n\t\treturn <g transform={`translate(${ x }, ${ y })`}>{this.props.children}</g>;\n\t}\n}\n\nChart.propTypes = {\n\theight: PropTypes.number,\n\twidth: PropTypes.number,\n\torigin: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.func\n\t]),\n\tid: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n\tyExtents: PropTypes.oneOfType([\n\t\tPropTypes.array,\n\t\tPropTypes.func\n\t]),\n\tyExtentsCalculator: function(props, propName, componentName) {\n\t\tif (isNotDefined(props.yExtents) && typeof props.yExtentsCalculator !== \"function\")\n\t\t\treturn new Error(\"yExtents or yExtentsCalculator must\"\n\t\t\t\t+ ` be present on ${componentName}. Validation failed.`);\n\t},\n\tonContextMenu: PropTypes.func,\n\tyScale: PropTypes.func,\n\n\tflipYScale: PropTypes.bool,\n\tpadding: PropTypes.oneOfType([\n\t\tPropTypes.number,\n\t\tPropTypes.shape({\n\t\t\ttop: PropTypes.number,\n\t\t\tbottom: PropTypes.number,\n\t\t})\n\t]),\n\tchildren: PropTypes.node,\n};\n\nChart.defaultProps = {\n\tid: 0,\n\torigin: [0, 0],\n\tpadding: 0,\n\tyScale: scaleLinear(),\n\tflipYScale: false,\n\tyPan: true,\n\tonContextMenu: noop,\n};\n\nChart.contextTypes = {\n\tchartConfig: PropTypes.array,\n\tsubscribe: PropTypes.func.isRequired,\n\tunsubscribe: PropTypes.func.isRequired,\n};\n\nChart.childContextTypes = {\n\tchartConfig: PropTypes.object.isRequired,\n\tchartId: PropTypes.oneOfType([PropTypes.number, PropTypes.string]).isRequired,\n};\n\nexport default Chart;\n"]}