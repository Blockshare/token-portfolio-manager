{"version":3,"sources":["../../../src/lib/interactive/DrawingObjectSelector.js"],"names":["DrawingObjectSelector","props","handleClick","bind","handleDoubleClick","getInteraction","moreProps","e","console","log","preventDefault","onDoubleClick","enabled","interactives","selected","map","objects","each","filter","obj","length","item","morePropsForChart","chartId","onSelect","getInteractiveNodes","drawingObjectMap","interactiveNodes","key","type","valueArray","node","undefined","valuePresent","Array","isArray","getSelectionState","propTypes","func","isRequired","object","bool","defaultProps"],"mappings":"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","file":"DrawingObjectSelector.js","sourcesContent":["\"use strict\";\n\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { isDefined, noop, mapObject, head } from \"../utils\";\nimport { getMorePropsForChart } from \"./utils\";\n\nimport GenericComponent, { getMouseCanvas } from \"../GenericComponent\";\n\n\nclass DrawingObjectSelector extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.handleClick = this.handleClick.bind(this);\n\t\tthis.handleDoubleClick = this.handleDoubleClick.bind(this);\n\t\tthis.getInteraction = this.getInteraction.bind(this);\n\t}\n\thandleDoubleClick(moreProps, e) {\n\t\tconsole.log(\"Double Click\");\n\n\t\te.preventDefault();\n\t\tconst { onDoubleClick } = this.props;\n\t\tconst { enabled } = this.props;\n\t\tif (!enabled) return;\n\n\t\tconst interactives = this.getInteraction(moreProps);\n\n\t\tconst selected = interactives\n\t\t\t.map(each => {\n\t\t\t\tconst objects = each.objects.filter(obj => {\n\t\t\t\t\treturn obj.selected;\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\t...each,\n\t\t\t\t\tobjects,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.filter(each => each.objects.length > 0);\n\n\t\t// console.log(selected, interactives)\n\t\tif (selected.length > 0) {\n\t\t\tconst item = head(selected);\n\t\t\tconst morePropsForChart = getMorePropsForChart(\n\t\t\t\tmoreProps, item.chartId\n\t\t\t);\n\t\t\tonDoubleClick(item, morePropsForChart);\n\t\t}\n\t}\n\thandleClick(moreProps, e) {\n\t\tconsole.log(\"Click\");\n\t\te.preventDefault();\n\t\tconst { onSelect } = this.props;\n\t\tconst { enabled } = this.props;\n\t\tif (!enabled) return;\n\n\t\tconst interactives = this.getInteraction(moreProps);\n\n\t\tonSelect(interactives, moreProps);\n\t}\n\tgetInteraction(moreProps) {\n\t\tconst { getInteractiveNodes, drawingObjectMap } = this.props;\n\t\tconst interactiveNodes = getInteractiveNodes();\n\t\tconst interactives = mapObject(interactiveNodes, each => {\n\t\t\tconst key = drawingObjectMap[each.type];\n\n\t\t\tconst valueArray = isDefined(key)\n\t\t\t\t? each.node.props[key]\n\t\t\t\t: undefined;\n\n\t\t\tconst valuePresent = isDefined(valueArray)\n\t\t\t\t&& Array.isArray(valueArray)\n\t\t\t\t&& valueArray.length > 0;\n\t\t\tif (valuePresent) {\n\t\t\t\t// console.log(\"Value present for \", each.type, each.chartId);\n\t\t\t\tconst morePropsForChart = getMorePropsForChart(\n\t\t\t\t\tmoreProps, each.chartId\n\t\t\t\t);\n\n\t\t\t\tconst objects = each.node.getSelectionState(morePropsForChart);\n\n\t\t\t\treturn {\n\t\t\t\t\ttype: each.type,\n\t\t\t\t\tchartId: each.chartId,\n\t\t\t\t\tobjects,\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn {\n\t\t\t\ttype: each.type,\n\t\t\t\tchartId: each.chartId,\n\t\t\t\tobjects: [],\n\t\t\t};\n\t\t});\n\t\treturn interactives;\n\t}\n\trender() {\n\t\treturn (\n\t\t\t<GenericComponent\n\t\t\t\tsvgDraw={noop}\n\t\t\t\tcanvasToDraw={getMouseCanvas}\n\t\t\t\tcanvasDraw={noop}\n\n\t\t\t\tonMouseDown={this.handleClick}\n\t\t\t\tonDoubleClick={this.handleDoubleClick}\n\n\t\t\t\tdrawOn={[\"mousemove\", \"pan\", \"drag\"]}\n\t\t\t/>\n\t\t);\n\t}\n}\n\n\nDrawingObjectSelector.propTypes = {\n\tgetInteractiveNodes: PropTypes.func.isRequired,\n\tonSelect: PropTypes.func.isRequired,\n\tonDoubleClick: PropTypes.func.isRequired,\n\tdrawingObjectMap: PropTypes.object.isRequired,\n\tenabled: PropTypes.bool.isRequired,\n};\n\nDrawingObjectSelector.defaultProps = {\n\tenabled: true,\n\tonDoubleClick: noop,\n};\n\nexport default DrawingObjectSelector;\n"]}